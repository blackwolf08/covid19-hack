{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from\"react\";import PropTypes from\"prop-types\";import CCFieldFormatter from\"./CCFieldFormatter\";import CCFieldValidator from\"./CCFieldValidator\";import compact from\"lodash.compact\";export var InjectedProps={focused:PropTypes.string,values:PropTypes.object.isRequired,status:PropTypes.object.isRequired,onFocus:PropTypes.func.isRequired,onChange:PropTypes.func.isRequired,onBecomeEmpty:PropTypes.func.isRequired,onBecomeValid:PropTypes.func.isRequired,requiresName:PropTypes.bool,requiresCVC:PropTypes.bool,requiresPostalCode:PropTypes.bool};export default function connectToState(CreditCardInput){var StateConnection=function(_Component){_inherits(StateConnection,_Component);var _super=_createSuper(StateConnection);function StateConnection(){var _this;_classCallCheck(this,StateConnection);_this=_super.call(this);_this.componentDidMount=function(){return setTimeout(function(){_this.props.autoFocus&&_this.focus(\"number\");_this.setValues(_this.props.values);});};_this.setValues=function(values){var newValues=_objectSpread({},_this.state.values,{},values);var displayedFields=_this._displayedFields();var formattedValues=new CCFieldFormatter(displayedFields).formatValues(newValues);var validation=new CCFieldValidator(displayedFields,_this.props.validatePostalCode).validateValues(formattedValues);var newState=_objectSpread({values:formattedValues},validation);_this.setState(newState);_this.props.onChange(newState);};_this.focus=function(){var field=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"number\";_this.setState({focused:field});};_this._displayedFields=function(){var _this$props=_this.props,requiresName=_this$props.requiresName,requiresCVC=_this$props.requiresCVC,requiresPostalCode=_this$props.requiresPostalCode;return compact([\"number\",\"expiry\",requiresCVC?\"cvc\":null,requiresName?\"name\":null,requiresPostalCode?\"postalCode\":null]);};_this._focusPreviousField=function(field){var displayedFields=_this._displayedFields();var fieldIndex=displayedFields.indexOf(field);var previousField=displayedFields[fieldIndex-1];if(previousField)_this.focus(previousField);};_this._focusNextField=function(field){if(['name','cvc'].includes(field))return;var displayedFields=_this._displayedFields();var fieldIndex=displayedFields.indexOf(field);var nextField=displayedFields[fieldIndex+1];if(nextField)_this.focus(nextField);};_this._change=function(field,value){_this.setValues(_defineProperty({},field,value));};_this._onFocus=function(field){_this.focus(field);_this.props.onFocus(field);};_this.state={focused:\"\",values:{},status:{}};return _this;}_createClass(StateConnection,[{key:\"render\",value:function render(){return React.createElement(CreditCardInput,_extends({},this.props,this.state,{onFocus:this._onFocus,onChange:this._change,onBecomeEmpty:this._focusPreviousField,onBecomeValid:this._focusNextField}));}}]);return StateConnection;}(Component);StateConnection.propTypes={autoFocus:PropTypes.bool,onChange:PropTypes.func.isRequired,onFocus:PropTypes.func,requiresName:PropTypes.bool,requiresCVC:PropTypes.bool,requiresPostalCode:PropTypes.bool,validatePostalCode:PropTypes.func};StateConnection.defaultProps={autoFocus:false,onChange:function onChange(){},onFocus:function onFocus(){},requiresName:false,requiresCVC:true,requiresPostalCode:false,validatePostalCode:function validatePostalCode(){var postalCode=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";return postalCode.match(/^\\d{6}$/)?\"valid\":postalCode.length>6?\"invalid\":\"incomplete\";}};return StateConnection;}","map":{"version":3,"sources":["/media/blackwolf08/Data/New Projects/Covid-19/COVID19/node_modules/react-native-input-credit-card/src/connectToState.js"],"names":["React","Component","PropTypes","CCFieldFormatter","CCFieldValidator","compact","InjectedProps","focused","string","values","object","isRequired","status","onFocus","func","onChange","onBecomeEmpty","onBecomeValid","requiresName","bool","requiresCVC","requiresPostalCode","connectToState","CreditCardInput","StateConnection","componentDidMount","setTimeout","props","autoFocus","focus","setValues","newValues","state","displayedFields","_displayedFields","formattedValues","formatValues","validation","validatePostalCode","validateValues","newState","setState","field","_focusPreviousField","fieldIndex","indexOf","previousField","_focusNextField","includes","nextField","_change","value","_onFocus","propTypes","defaultProps","postalCode","match","length"],"mappings":"u0DAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA,MAAOC,CAAAA,gBAAP,0BACA,MAAOC,CAAAA,gBAAP,0BACA,MAAOC,CAAAA,OAAP,KAAoB,gBAApB,CAEA,MAAO,IAAMC,CAAAA,aAAa,CAAG,CAC3BC,OAAO,CAAEL,SAAS,CAACM,MADQ,CAE3BC,MAAM,CAAEP,SAAS,CAACQ,MAAV,CAAiBC,UAFE,CAG3BC,MAAM,CAAEV,SAAS,CAACQ,MAAV,CAAiBC,UAHE,CAI3BE,OAAO,CAAEX,SAAS,CAACY,IAAV,CAAeH,UAJG,CAK3BI,QAAQ,CAAEb,SAAS,CAACY,IAAV,CAAeH,UALE,CAM3BK,aAAa,CAAEd,SAAS,CAACY,IAAV,CAAeH,UANH,CAO3BM,aAAa,CAAEf,SAAS,CAACY,IAAV,CAAeH,UAPH,CAQ3BO,YAAY,CAAEhB,SAAS,CAACiB,IARG,CAS3BC,WAAW,CAAElB,SAAS,CAACiB,IATI,CAU3BE,kBAAkB,CAAEnB,SAAS,CAACiB,IAVH,CAAtB,CAaP,cAAe,SAASG,CAAAA,cAAT,CAAwBC,eAAxB,CAAyC,IAChDC,CAAAA,eADgD,qGA0BpD,0BAAc,iDACZ,wBADY,MASdC,iBATc,CASM,iBAAMC,CAAAA,UAAU,CAAC,UAAM,CACzC,MAAKC,KAAL,CAAWC,SAAX,EAAwB,MAAKC,KAAL,CAAW,QAAX,CAAxB,CACA,MAAKC,SAAL,CAAe,MAAKH,KAAL,CAAWlB,MAA1B,EACD,CAHmC,CAAhB,EATN,OAcdqB,SAdc,CAcF,SAAArB,MAAM,CAAI,CACpB,GAAMsB,CAAAA,SAAS,kBAAQ,MAAKC,KAAL,CAAWvB,MAAnB,IAA8BA,MAA9B,CAAf,CACA,GAAMwB,CAAAA,eAAe,CAAG,MAAKC,gBAAL,EAAxB,CACA,GAAMC,CAAAA,eAAe,CAAI,GAAIhC,CAAAA,gBAAJ,CAAqB8B,eAArB,CAAD,CAAwCG,YAAxC,CAAqDL,SAArD,CAAxB,CACA,GAAMM,CAAAA,UAAU,CAAI,GAAIjC,CAAAA,gBAAJ,CAAqB6B,eAArB,CAAsC,MAAKN,KAAL,CAAWW,kBAAjD,CAAD,CAAuEC,cAAvE,CAAsFJ,eAAtF,CAAnB,CACA,GAAMK,CAAAA,QAAQ,gBAAK/B,MAAM,CAAE0B,eAAb,EAAiCE,UAAjC,CAAd,CAEA,MAAKI,QAAL,CAAcD,QAAd,EACA,MAAKb,KAAL,CAAWZ,QAAX,CAAoByB,QAApB,EACD,CAvBa,OAyBdX,KAzBc,CAyBN,UAAsB,IAArBa,CAAAA,KAAqB,2DAAb,QAAa,CAC5B,MAAKD,QAAL,CAAc,CAAElC,OAAO,CAAEmC,KAAX,CAAd,EACD,CA3Ba,OA6BdR,gBA7Bc,CA6BK,UAAM,iBACmC,MAAKP,KADxC,CACfT,YADe,aACfA,YADe,CACDE,WADC,aACDA,WADC,CACYC,kBADZ,aACYA,kBADZ,CAEvB,MAAOhB,CAAAA,OAAO,CAAC,CACb,QADa,CAEb,QAFa,CAGbe,WAAW,CAAG,KAAH,CAAW,IAHT,CAIbF,YAAY,CAAG,MAAH,CAAY,IAJX,CAKbG,kBAAkB,CAAG,YAAH,CAAkB,IALvB,CAAD,CAAd,CAOD,CAtCa,OAwCdsB,mBAxCc,CAwCQ,SAAAD,KAAK,CAAI,CAC7B,GAAMT,CAAAA,eAAe,CAAG,MAAKC,gBAAL,EAAxB,CACA,GAAMU,CAAAA,UAAU,CAAGX,eAAe,CAACY,OAAhB,CAAwBH,KAAxB,CAAnB,CACA,GAAMI,CAAAA,aAAa,CAAGb,eAAe,CAACW,UAAU,CAAG,CAAd,CAArC,CACA,GAAIE,aAAJ,CAAmB,MAAKjB,KAAL,CAAWiB,aAAX,EACpB,CA7Ca,OA+CdC,eA/Cc,CA+CI,SAAAL,KAAK,CAAI,CACzB,GAAI,CAAC,MAAD,CAAS,KAAT,EAAgBM,QAAhB,CAAyBN,KAAzB,CAAJ,CAAqC,OAIrC,GAAMT,CAAAA,eAAe,CAAG,MAAKC,gBAAL,EAAxB,CACA,GAAMU,CAAAA,UAAU,CAAGX,eAAe,CAACY,OAAhB,CAAwBH,KAAxB,CAAnB,CACA,GAAMO,CAAAA,SAAS,CAAGhB,eAAe,CAACW,UAAU,CAAG,CAAd,CAAjC,CACA,GAAIK,SAAJ,CAAe,MAAKpB,KAAL,CAAWoB,SAAX,EAChB,CAxDa,OA0DdC,OA1Dc,CA0DJ,SAACR,KAAD,CAAQS,KAAR,CAAkB,CAC1B,MAAKrB,SAAL,oBAAkBY,KAAlB,CAA0BS,KAA1B,GACD,CA5Da,OA8DdC,QA9Dc,CA8DH,SAACV,KAAD,CAAW,CACpB,MAAKb,KAAL,CAAWa,KAAX,EACA,MAAKf,KAAL,CAAWd,OAAX,CAAmB6B,KAAnB,EACD,CAjEa,CAEZ,MAAKV,KAAL,CAAa,CACXzB,OAAO,CAAE,EADE,CAEXE,MAAM,CAAE,EAFG,CAGXG,MAAM,CAAE,EAHG,CAAb,CAFY,aAOb,CAjCmD,mEA6F3C,CACP,MACE,qBAAC,eAAD,aACM,KAAKe,KADX,CAEM,KAAKK,KAFX,EAGE,OAAO,CAAE,KAAKoB,QAHhB,CAIE,QAAQ,CAAE,KAAKF,OAJjB,CAKE,aAAa,CAAE,KAAKP,mBALtB,CAME,aAAa,CAAE,KAAKI,eANtB,GADF,CASD,CAvGmD,6BACxB9C,SADwB,EAChDuB,eADgD,CAE7C6B,SAF6C,CAEjC,CACjBzB,SAAS,CAAE1B,SAAS,CAACiB,IADJ,CAEjBJ,QAAQ,CAAEb,SAAS,CAACY,IAAV,CAAeH,UAFR,CAGjBE,OAAO,CAAEX,SAAS,CAACY,IAHF,CAIjBI,YAAY,CAAEhB,SAAS,CAACiB,IAJP,CAKjBC,WAAW,CAAElB,SAAS,CAACiB,IALN,CAMjBE,kBAAkB,CAAEnB,SAAS,CAACiB,IANb,CAOjBmB,kBAAkB,CAAEpC,SAAS,CAACY,IAPb,CAFiC,CAChDU,eADgD,CAY7C8B,YAZ6C,CAY9B,CACpB1B,SAAS,CAAE,KADS,CAEpBb,QAAQ,CAAE,mBAAM,CAAG,CAFC,CAGpBF,OAAO,CAAE,kBAAM,CAAG,CAHE,CAIpBK,YAAY,CAAE,KAJM,CAKpBE,WAAW,CAAE,IALO,CAMpBC,kBAAkB,CAAE,KANA,CAOpBiB,kBAAkB,CAAE,6BAAqB,IAApBiB,CAAAA,UAAoB,2DAAP,EAAO,CACvC,MAAOA,CAAAA,UAAU,CAACC,KAAX,CAAiB,SAAjB,EAA8B,OAA9B,CACLD,UAAU,CAACE,MAAX,CAAoB,CAApB,CAAwB,SAAxB,CACE,YAFJ,CAGD,CAXmB,CAZ8B,CA0GtD,MAAOjC,CAAAA,eAAP,CACD","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport CCFieldFormatter from \"./CCFieldFormatter\";\nimport CCFieldValidator from \"./CCFieldValidator\";\nimport compact from \"lodash.compact\";\n\nexport const InjectedProps = {\n  focused: PropTypes.string,\n  values: PropTypes.object.isRequired,\n  status: PropTypes.object.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onBecomeEmpty: PropTypes.func.isRequired,\n  onBecomeValid: PropTypes.func.isRequired,\n  requiresName: PropTypes.bool,\n  requiresCVC: PropTypes.bool,\n  requiresPostalCode: PropTypes.bool,\n};\n\nexport default function connectToState(CreditCardInput) {\n  class StateConnection extends Component {\n    static propTypes = {\n      autoFocus: PropTypes.bool,\n      onChange: PropTypes.func.isRequired,\n      onFocus: PropTypes.func,\n      requiresName: PropTypes.bool,\n      requiresCVC: PropTypes.bool,\n      requiresPostalCode: PropTypes.bool,\n      validatePostalCode: PropTypes.func,\n    };\n\n    static defaultProps = {\n      autoFocus: false,\n      onChange: () => { },\n      onFocus: () => { },\n      requiresName: false,\n      requiresCVC: true,\n      requiresPostalCode: false,\n      validatePostalCode: (postalCode = \"\") => {\n        return postalCode.match(/^\\d{6}$/) ? \"valid\" :\n          postalCode.length > 6 ? \"invalid\" :\n            \"incomplete\";\n      },\n    };\n\n    constructor() {\n      super();\n      this.state = {\n        focused: \"\",\n        values: {},\n        status: {},\n      };\n    }\n\n    componentDidMount = () => setTimeout(() => { // Hacks because componentDidMount happens before component is rendered\n      this.props.autoFocus && this.focus(\"number\");\n      this.setValues(this.props.values);\n    });\n\n    setValues = values => {\n      const newValues = { ...this.state.values, ...values };\n      const displayedFields = this._displayedFields();\n      const formattedValues = (new CCFieldFormatter(displayedFields)).formatValues(newValues);\n      const validation = (new CCFieldValidator(displayedFields, this.props.validatePostalCode)).validateValues(formattedValues);\n      const newState = { values: formattedValues, ...validation };\n\n      this.setState(newState);\n      this.props.onChange(newState);\n    };\n\n    focus = (field = \"number\") => {\n      this.setState({ focused: field });\n    };\n\n    _displayedFields = () => {\n      const { requiresName, requiresCVC, requiresPostalCode } = this.props;\n      return compact([\n        \"number\",\n        \"expiry\",\n        requiresCVC ? \"cvc\" : null,\n        requiresName ? \"name\" : null,\n        requiresPostalCode ? \"postalCode\" : null,\n      ]);\n    };\n\n    _focusPreviousField = field => {\n      const displayedFields = this._displayedFields();\n      const fieldIndex = displayedFields.indexOf(field);\n      const previousField = displayedFields[fieldIndex - 1];\n      if (previousField) this.focus(previousField);\n    };\n\n    _focusNextField = field => {\n      if (['name', 'cvc'].includes(field)) return;\n      // Should not focus to the next field after name (e.g. when requiresName & requiresPostalCode are true\n      // because we can't determine if the user has completed their name or not)\n\n      const displayedFields = this._displayedFields();\n      const fieldIndex = displayedFields.indexOf(field);\n      const nextField = displayedFields[fieldIndex + 1];\n      if (nextField) this.focus(nextField);\n    };\n\n    _change = (field, value) => {\n      this.setValues({ [field]: value });\n    };\n\n    _onFocus = (field) => {\n      this.focus(field);\n      this.props.onFocus(field);\n    };\n\n    render() {\n      return (\n        <CreditCardInput\n          {...this.props}\n          {...this.state}\n          onFocus={this._onFocus}\n          onChange={this._change}\n          onBecomeEmpty={this._focusPreviousField}\n          onBecomeValid={this._focusNextField} />\n      );\n    }\n  }\n\n  return StateConnection;\n}\n"]},"metadata":{},"sourceType":"module"}