{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import React,{useState,useEffect}from\"react\";import Platform from\"react-native-web/dist/exports/Platform\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Constants from\"expo-constants\";import*as Location from\"expo-location\";import firebase from\"firebase\";var API_KEY=\"AIzaSyA-BEPYPnVnTggLAhVx9BpwPkqnkLB1Pds\";Location.setApiKey(API_KEY);export default function App(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),location=_useState2[0],setLocation=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errorMsg=_useState4[0],setErrorMsg=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),coords=_useState6[0],setCoords=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),address=_useState8[0],setAddress=_useState8[1];useEffect(function(){(function _callee(){var _await$Location$reque,status,location,latitude,longitude,coords,address;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());case 2:_await$Location$reque=_context.sent;status=_await$Location$reque.status;if(status!==\"granted\"){setErrorMsg(\"Permission to access location was denied\");}_context.next=7;return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));case 7:location=_context.sent;setLocation(location);latitude=location.coords.latitude;longitude=location.coords.longitude;coords={latitude:latitude,longitude:longitude};setCoords(coords);_context.next=15;return _regeneratorRuntime.awrap(Location.reverseGeocodeAsync(coords));case 15:address=_context.sent;setAddress(address);props.setLocation(coords,address);case 18:case\"end\":return _context.stop();}}},null,null,null,Promise);})();},[]);var login=function login(){var res;return _regeneratorRuntime.async(function login$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return _regeneratorRuntime.awrap(firebase.auth().signInAnonymously());case 3:res=_context2.sent;console.log(res);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},null,null,[[0,7]],Promise);};var saveToDB=function saveToDB(){return _regeneratorRuntime.async(function saveToDB$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _regeneratorRuntime.awrap(firebase.database().ref(\"users\"));case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 8:case\"end\":return _context3.stop();}}},null,null,[[0,5]],Promise);};var text=\"Waiting..\";if(errorMsg){text=errorMsg;}else if(coords){text=JSON.stringify(address);}return React.createElement(React.Fragment,null);}var styles=StyleSheet.create({container:{flex:1,justifyContent:\"center\",alignItems:\"center\"}});","map":{"version":3,"sources":["/media/blackwolf08/Data/New Projects/Covid-19/COVID19/components/Location.js"],"names":["React","useState","useEffect","Constants","Location","firebase","API_KEY","setApiKey","App","props","location","setLocation","errorMsg","setErrorMsg","coords","setCoords","address","setAddress","requestPermissionsAsync","status","getCurrentPositionAsync","latitude","longitude","reverseGeocodeAsync","login","auth","signInAnonymously","res","console","log","saveToDB","database","ref","text","JSON","stringify","styles","StyleSheet","create","container","flex","justifyContent","alignItems"],"mappings":"6HAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,C,qTAQA,MAAOC,CAAAA,SAAP,KAAsB,gBAAtB,CACA,MAAO,GAAKC,CAAAA,QAAZ,KAA0B,eAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAEA,GAAMC,CAAAA,OAAO,CAAG,yCAAhB,CAEAF,QAAQ,CAACG,SAAT,CAAmBD,OAAnB,EAEA,cAAe,SAASE,CAAAA,GAAT,CAAaC,KAAb,CAAoB,eACDR,QAAQ,CAAC,IAAD,CADP,wCAC1BS,QAD0B,eAChBC,WADgB,8BAEDV,QAAQ,CAAC,IAAD,CAFP,yCAE1BW,QAF0B,eAEhBC,WAFgB,8BAGLZ,QAAQ,CAAC,IAAD,CAHH,yCAG1Ba,MAH0B,eAGlBC,SAHkB,8BAIHd,QAAQ,CAAC,IAAD,CAJL,yCAI1Be,OAJ0B,eAIjBC,UAJiB,eAMjCf,SAAS,CAAC,UAAM,CACd,CAAC,iQACwBE,QAAQ,CAACc,uBAAT,EADxB,6CACOC,MADP,uBACOA,MADP,CAEC,GAAIA,MAAM,GAAK,SAAf,CAA0B,CACxBN,WAAW,CAAC,0CAAD,CAAX,CACD,CAJF,iDAMsBT,QAAQ,CAACgB,uBAAT,CAAiC,EAAjC,CANtB,SAMKV,QANL,eAQCC,WAAW,CAACD,QAAD,CAAX,CAEIW,QAVL,CAUgBX,QAAQ,CAACI,MAAT,CAAgBO,QAVhC,CAWKC,SAXL,CAWiBZ,QAAQ,CAACI,MAAT,CAAgBQ,SAXjC,CAaKR,MAbL,CAac,CAAEO,QAAQ,CAARA,QAAF,CAAYC,SAAS,CAATA,SAAZ,CAbd,CAcCP,SAAS,CAACD,MAAD,CAAT,CAdD,kDAgBqBV,QAAQ,CAACmB,mBAAT,CAA6BT,MAA7B,CAhBrB,UAgBKE,OAhBL,eAiBCC,UAAU,CAACD,OAAD,CAAV,CACAP,KAAK,CAACE,WAAN,CAAkBG,MAAlB,CAA0BE,OAA1B,EAlBD,sEAAD,IAoBD,CArBQ,CAqBN,EArBM,CAAT,CAuBA,GAAMQ,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,gMAEMnB,QAAQ,CAACoB,IAAT,GAAgBC,iBAAhB,EAFN,SAENC,GAFM,gBAGVC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EAHU,mFAKVC,OAAO,CAACC,GAAR,eALU,0EAAd,CASA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,2LAEPzB,QAAQ,CAAC0B,QAAT,GAAoBC,GAApB,CAAwB,OAAxB,CAFO,2FAIbJ,OAAO,CAACC,GAAR,eAJa,yEAAjB,CAQA,GAAII,CAAAA,IAAI,CAAG,WAAX,CACA,GAAIrB,QAAJ,CAAc,CACZqB,IAAI,CAAGrB,QAAP,CACD,CAFD,IAEO,IAAIE,MAAJ,CAAY,CACjBmB,IAAI,CAAGC,IAAI,CAACC,SAAL,CAAenB,OAAf,CAAP,CACD,CAED,MAAO,yCAAP,CACD,CACD,GAAMoB,CAAAA,MAAM,CAAGC,UAAU,CAACC,MAAX,CAAkB,CAC/BC,SAAS,CAAE,CACTC,IAAI,CAAE,CADG,CAETC,cAAc,CAAE,QAFP,CAGTC,UAAU,CAAE,QAHH,CADoB,CAAlB,CAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Platform,\n  Text,\n  View,\n  StyleSheet,\n  TouchableOpacity,\n} from \"react-native\";\nimport Constants from \"expo-constants\";\nimport * as Location from \"expo-location\";\nimport firebase from \"firebase\";\n\nconst API_KEY = \"AIzaSyA-BEPYPnVnTggLAhVx9BpwPkqnkLB1Pds\";\n\nLocation.setApiKey(API_KEY);\n\nexport default function App(props) {\n  const [location, setLocation] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n  const [coords, setCoords] = useState(null);\n  const [address, setAddress] = useState(null);\n\n  useEffect(() => {\n    (async () => {\n      let { status } = await Location.requestPermissionsAsync();\n      if (status !== \"granted\") {\n        setErrorMsg(\"Permission to access location was denied\");\n      }\n\n      let location = await Location.getCurrentPositionAsync({});\n\n      setLocation(location);\n\n      let latitude = location.coords.latitude;\n      let longitude = location.coords.longitude;\n\n      let coords = { latitude, longitude };\n      setCoords(coords);\n\n      let address = await Location.reverseGeocodeAsync(coords);\n      setAddress(address);\n      props.setLocation(coords, address);\n    })();\n  }, []);\n\n  const login = async () => {\n    try {\n      let res = await firebase.auth().signInAnonymously();\n      console.log(res);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const saveToDB = async () => {\n    try {\n      await firebase.database().ref(\"users\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  let text = \"Waiting..\";\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (coords) {\n    text = JSON.stringify(address);\n  }\n\n  return <></>;\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}