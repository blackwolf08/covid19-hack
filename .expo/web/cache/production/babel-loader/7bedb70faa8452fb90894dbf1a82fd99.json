{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key];}}return target;}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key];}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import React from'react';import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import{SceneView}from'@react-navigation/core';var FAR_FAR_AWAY=3000;var ResourceSavingSceneView=function(_React$PureComponent){_inherits(ResourceSavingSceneView,_React$PureComponent);var _super=_createSuper(ResourceSavingSceneView);_createClass(ResourceSavingSceneView,null,[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.isFocused&&!prevState.awake){return{awake:true};}else{return null;}}}]);function ResourceSavingSceneView(props){var _this;_classCallCheck(this,ResourceSavingSceneView);_this=_super.call(this);_defineProperty(_assertThisInitialized(_this),\"_mustAlwaysBeVisible\",function(){return _this.props.animationEnabled||_this.props.swipeEnabled;});_this.state={awake:props.lazy?props.isFocused:true};return _this;}_createClass(ResourceSavingSceneView,[{key:\"render\",value:function render(){var awake=this.state.awake;var _this$props=this.props,isFocused=_this$props.isFocused,childNavigation=_this$props.childNavigation,removeClippedSubviews=_this$props.removeClippedSubviews,rest=_objectWithoutProperties(_this$props,[\"isFocused\",\"childNavigation\",\"removeClippedSubviews\"]);return React.createElement(View,{style:styles.container,collapsable:false,removeClippedSubviews:Platform.OS==='android'?removeClippedSubviews:!isFocused&&removeClippedSubviews},React.createElement(View,{style:this._mustAlwaysBeVisible()||isFocused?styles.innerAttached:styles.innerDetached},awake?React.createElement(SceneView,_extends({},rest,{navigation:childNavigation})):null));}}]);return ResourceSavingSceneView;}(React.PureComponent);var styles=StyleSheet.create({container:{flex:1,overflow:'hidden'},innerAttached:{flex:1},innerDetached:{flex:1,top:FAR_FAR_AWAY}});export default ResourceSavingSceneView;","map":{"version":3,"sources":["ResourceSavingSceneView.js"],"names":["FAR_FAR_AWAY","React","nextProps","prevState","awake","constructor","props","removeClippedSubviews","styles","Platform","innerDetached","childNavigation","container","flex","overflow","innerAttached","top"],"mappings":"ypEAAA,MAAA,CAAA,KAAA,KAAA,OAAA,C,mLAEA,OAAA,SAAA,KAAA,wBAAA,CAEA,GAAMA,CAAAA,YAAY,CAAlB,IAAA,C,GAEA,CAAA,uB,4PACE,S,CAAA,S,CAAsD,CACpD,GAAIE,SAAS,CAATA,SAAAA,EAAuB,CAACC,SAAS,CAArC,KAAA,CAA6C,CAC3C,MAAO,CAAEC,KAAK,CAAE,IAAT,CAAP,CADF,CAAA,IAEO,CACL,MAAA,KAAA,CACD,CACF,C,IAEDC,iCAAW,KAAXA,CAAmB,yDACjB,wBADiB,eAAA,+BAAA,sBAAA,CAQI,UAAM,CAC3B,MAAO,OAAA,KAAA,CAAA,gBAAA,EAA+B,MAAA,KAAA,CAAtC,YAAA,CATiB,CAAA,CAAA,CAGjB,MAAA,KAAA,CAAa,CACXD,KAAK,CAAEE,KAAK,CAALA,IAAAA,CAAaA,KAAK,CAAlBA,SAAAA,CAA+B,IAD3B,CAAb,CAHiB,aAMlB,C,2EAMQ,IACCF,CAAAA,KADD,CACW,KAAlB,KADO,CACCA,KADD,CAEP,GAAA,CAAA,WAAA,CAKI,KALJ,KAAA,CAAM,SAAN,CAAA,WAAA,CAAM,SAAN,CAAM,eAAN,CAAA,WAAA,CAAM,eAAN,CAGEG,qBAHF,CAAA,WAAA,CAGEA,qBAHF,CAAA,IAAA,CAAA,wBAAA,CAAA,WAAA,CAAA,CAAA,WAAA,CAAA,iBAAA,CAAA,uBAAA,CAAA,CAAA,CAOA,MACE,CAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CACE,KAAK,CAAEC,MAAM,CADf,SAAA,CAEE,WAAW,CAFb,KAAA,CAGE,qBAAqB,CACnBC,QAAQ,CAARA,EAAAA,GAAAA,SAAAA,CAAAA,qBAAAA,CAEI,CAAA,SAAA,EAAcF,qBANtB,CAAA,CASE,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA,CACE,KAAK,CACH,KAAA,oBAAA,IAAA,SAAA,CACIC,MAAM,CADV,aAAA,CAEIA,MAAM,CAACE,aAJf,CAAA,CAOGN,KAAK,CAAG,KAAA,CAAA,aAAA,CAAA,SAAA,CAAA,QAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAqB,UAAU,CAAEO,eAAjC,CAAA,CAAA,CAAH,CAjBZ,IAUI,CATF,CADF,CAqBD,C,qCAnDmCV,KAAK,CAA3C,a,EAsDA,GAAMO,CAAAA,MAAM,CAAG,UAAU,CAAV,MAAA,CAAkB,CAC/BI,SAAS,CAAE,CACTC,IAAI,CADK,CAAA,CAETC,QAAQ,CAAE,QAFD,CADoB,CAK/BC,aAAa,CAAE,CACbF,IAAI,CAAE,CADO,CALgB,CAQ/BH,aAAa,CAAE,CACbG,IAAI,CADS,CAAA,CAEbG,GAAG,CAAEhB,YAFQ,CARgB,CAAlB,CAAf,CAcA,cAAA,CAAA,uBAAA","sourcesContent":["import React from 'react';\nimport { Platform, StyleSheet, View } from 'react-native';\nimport { SceneView } from '@react-navigation/core';\n\nconst FAR_FAR_AWAY = 3000; // this should be big enough to move the whole view out of its container\n\nclass ResourceSavingSceneView extends React.PureComponent {\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (nextProps.isFocused && !prevState.awake) {\n      return { awake: true };\n    } else {\n      return null;\n    }\n  }\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      awake: props.lazy ? props.isFocused : true,\n    };\n  }\n\n  _mustAlwaysBeVisible = () => {\n    return this.props.animationEnabled || this.props.swipeEnabled;\n  };\n\n  render() {\n    const { awake } = this.state;\n    const {\n      isFocused,\n      childNavigation,\n      removeClippedSubviews,\n      ...rest\n    } = this.props;\n\n    return (\n      <View\n        style={styles.container}\n        collapsable={false}\n        removeClippedSubviews={\n          Platform.OS === 'android'\n            ? removeClippedSubviews\n            : !isFocused && removeClippedSubviews\n        }\n      >\n        <View\n          style={\n            this._mustAlwaysBeVisible() || isFocused\n              ? styles.innerAttached\n              : styles.innerDetached\n          }\n        >\n          {awake ? <SceneView {...rest} navigation={childNavigation} /> : null}\n        </View>\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  innerAttached: {\n    flex: 1,\n  },\n  innerDetached: {\n    flex: 1,\n    top: FAR_FAR_AWAY,\n  },\n});\n\nexport default ResourceSavingSceneView;\n"]},"metadata":{},"sourceType":"module"}